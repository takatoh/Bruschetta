<!doctype html>
<html>
  <title>Bruschetta</title>
  <link href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900|Material+Icons" rel="stylesheet" type="text/css">
  <link href="https://cdn.jsdelivr.net/npm/quasar@2.11.8/dist/quasar.prod.css" rel="stylesheet" type="text/css">
</head>

  <body>
    <div id="app">
      <div id="app">
        <div class="q-pa-none">
          <q-layout view="hHh LpR fff" container style="min-height: 100vh" class="shadow-2">
            <q-header class="bg-teal-9 q-px-xl q-py-sm">
              <q-toolbar class="q-gutter-sm">
                <q-toolbar-title>Bruschetta</q-toolbar-title>
              </q-toolbar>
            </q-header>

            <q-page-container>
              <q-page class="q-pa-none">
                <div class="bg-white text-teal q-px-xl q-py-sm" style="border-bottom: solid 1px">
                  <q-toolbar class="q-gutter-lg">
                    <q-btn flat label="Books" color="white text-teal" href="{{ url_for('index') }}"></q-btn>
                    <q-btn flat label="Add a book" color="white text-teal" href="{{ url_for('book_add') }}"></q-btn>
                    <q-btn flat label="Disposed" color="white text-teal" href="{{ url_for('book_list_disposed') }}"></q-btn>
                    <q-btn flat label="Categoires" color="white text-teal" href="{{ url_for('category_list') }}"></q-btn>
                    <q-btn flat label="Formats" color="white text-teal" href="{{ url_for('format_list') }}"></q-btn>
                    <q-space></q-space>
                  </q-toolbar>
                </div>

                {% for message in get_flashed_messages() %}
                  <div class="flash">{{ message }}</div>
                {% endfor %}

                {% block body %}{% endblock %}

              </q-page>
            </q-page-container>

            <q-footer class="bg-teal q-px-xl q-py-sm">
              <q-toolbar class="q-gutter-sm">
                <q-space></q-space>
                <div>Bruschetta<q-badge color="white text-teal">v0.3-alpha</q-badge></div>
              </q-toolbar>
            </q-footer>
          </q-layout>
        </div>

    </div>

    <script src="https://cdn.jsdelivr.net/npm/vue@3/dist/vue.global.prod.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/quasar@2.11.8/dist/quasar.umd.prod.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/quasar@2.11.8/dist/lang/ja.umd.prod.js"></script>

    <script>
      const { createApp, ref } = Vue
      const app = createApp({
        setup () {
          return {
            title: ref(''),
            volume: ref(''),
            series: ref(''),
            seriesVolume: ref(''),
            author: ref(''),
            translator: ref(''),
            publisher: ref(''),
            category: ref(''),
            categoryOptions: ['novel', 'comic', 'nonfiction'],
            format: ref(''),
            formatOptions: ['hardcover', 'novel'],
            isbn: ref(''),
            publishedOn: ref(''),
            originalTitle: ref(''),
            note: ref(''),
            keyword: ref(''),
            disc: ref(''),
          }
        },
        delimiters: [ '<<', '>>'],
        methods: {
          insertBookInfo () {
            const isbn = this.isbn
            fetch(`https://api.openbd.jp/v1/get?isbn=${isbn}`)
              .then(response => response.json())
              .then(result => {
                const summary = result[0].summary
                this.title = summary.title
                this.volume = summary.volume
                this.series = summary.series
                this.author = summary.author
                this.publisher = summary.publisher
            })
          },
          cancel() {
            this.cleanValues()
          },
          say(message) {
            alert(message)
          }
        }
      })

      app.use(Quasar)
      Quasar.lang.set(Quasar.lang.ja)
      app.mount('#app')
    </script>

  </body>
</html>
